---
- name: "install packages"
  yum:
    list: mod_http2 php72w-fpm mod_fcgid
  notify:
    - restart apache

- name: "remove packages"
  yum:
    list: mod_php72w
    state: absent
  notify:
    - restart apache

- name: "update httpd.conf"
  template:
    src: httpd.j2.conf
    dest: /etc/httpd/conf/httpd.conf
    backup: yes
  notify:
    - restart apache

- name: "update httpd-le-ssl.conf"
  template:
    src: httpd-le-ssl.j2.conf
    dest: /etc/httpd/conf/httpd-le-ssl.conf
    backup: yes
  notify:
    - restart apache

- name: "update 00-mpm.conf"
  template:
    src: 00-mpm.j2.conf
    dest: /etc/httpd/conf.modules.d/00-mpm.conf
    backup: yes
  notify:
    - restart apache

- name: "update 00-brotli.conf"
  template:
    src: 00-brotli.j2.conf
    dest: /etc/httpd/conf.modules.d/00-brotli.conf
    backup: yes
  notify:
    - restart apache

- name: "update logrotate.d/httpd"
  template:
    src: logrotate.d/httpd.j2
    dest: /etc/logrotate.d/httpd
    backup: yes
