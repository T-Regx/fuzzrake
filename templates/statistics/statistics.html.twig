{% extends '_base.html.twig' %}

{% block title %}statistics{% endblock %}

{% block body %}
    <p>
        Take me to:
        <a href="#production_models">production models</a> &bull;
        <a href="#styles">styles</a> (<a href="#other_styles">other</a>) &bull;
        <a href="#order_types">order types</a> (<a href="#other_order_types">other</a>) &bull;
        <a href="#features">features</a> (<a href="#other_features">other</a>) &bull;
        <a href="#species">species</a> &bull;
        <a href="#data_statistics">data statistics</a>
    </p>

    <h1>Commission status</h1>
    {% include 'statistics/_data_table.html.twig' with { 'data': commissionsStats, 'name': '', total: commissionsStats.Total } %}

    <p>
        <a data-toggle="collapse" href="#cstExplain" role="button" aria-expanded="false" aria-controls="cstExplain">
            Explain above
        </a>
    </p>
    <div class="collapse pb-4" id="cstExplain">
        <div class="card card-body pb-0">
            <dl class="row">
                <dt class="col-sm-2">Open</dt>
                <dd class="col-sm-10">Number of fursuit makers not closed for commissions</dd>
            </dl>
            <dl class="row">
                <dt class="col-sm-2">Closed</dt>
                <dd class="col-sm-10">Number of fursuit makers not open for commissions</dd>
            </dl>
            <dl class="row">
                <dt class="col-sm-2">Tracked</dt>
                <dd class="col-sm-10">
                    Number of fursuit makers which commissions status is tracked automatically (the database contains
                    link to a page, which the getfursu.it software checks periodically to determine if the maker
                    is open for commissions or not). See <a href="{{ path('info') }}">here</a> for more info
                </dd>
            </dl>
            <dl class="row">
                <dt class="col-sm-2">Successfully tracked</dt>
                <dd class="col-sm-10">
                    Number of fursuit makers which commissions status is tracked automatically, and the software
                    is actually able to determine the status. See <a href="{{ path('info') }}">here</a> for more info
                </dd>
            </dl>
            <dl class="row">
                <dt class="col-sm-2">Total</dt>
                <dd class="col-sm-10">Ain't the weather lovely today?</dd>
            </dl>
        </div>
    </div>

    <h1>Countries</h1>
    {% include 'statistics/_data_table.html.twig' with { data: countries, name: 'Country', total: commissionsStats.Total } %}

    <h1 id="production_models">Production models</h1>
    {% include 'statistics/_data_table.html.twig' with { data: productionModels, name: 'Production model', total: commissionsStats.Total } %}

    <h1 id="styles">Styles</h1>
    {% include 'statistics/_data_table.html.twig' with { data: styles, name: 'Style', total: commissionsStats.Total } %}

    <h2 id="other_styles">Other styles</h2>
    {% include 'statistics/_item_pills.html.twig' with { items: otherStyles } %}

    <h1 id="order_types">Order types</h1>
    {% include 'statistics/_data_table.html.twig' with { data: orderTypes, name: 'Order type', total: commissionsStats.Total } %}

    <h2 id="other_order_types">Other order types</h2>
    {% include 'statistics/_item_pills.html.twig' with { items: otherOrderTypes } %}

    <h1 id="features">Features</h1>
    {% include 'statistics/_data_table.html.twig' with { data: features, name: 'Feature', total: commissionsStats.Total } %}

    <h2 id="other_features">Other features</h2>
    {% include 'statistics/_item_pills.html.twig' with { items: otherFeatures } %}

    <h1 id="species">Species</h1>

    <table class="table table-sm">
        <thead>
        <tr>
            <th>Specie/group</th>
            <th>Direct "does" count</th>
            <th>Direct "doesn't" count</th>
            <th>Total direct count</th>
            <th>Indirect "does" count</th>
            <th>Indirect "doesn't" count</th>
            <th>Total indirect count</th>
        </tr>
        </thead>
        <tbody>
        {% for specie, specieStats in speciesStats %}
            <tr>
                <td>{{ specie }}</td>
                <td>{{ specieStats.directDoesCount }}</td>
                <td>{{ specieStats.directDoesntCount }}</td>
                <td>{{ specieStats.directDoesCount + specieStats.directDoesntCount }}</td>
                <td>{{ specieStats.indirectDoesCount }}</td>
                <td>{{ specieStats.indirectDoesntCount }}</td>
                <td>{{ specieStats.indirectDoesCount + specieStats.indirectDoesntCount }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h1 id="data_statistics">Data statistics</h1>
    {% include 'statistics/_data_table.html.twig' with { data: completeness, name: 'Data completeness', total: commissionsStats.Total } %}

    {% include 'statistics/_data_table.html.twig' with { data: providedInfo, name: 'Information provided', total: commissionsStats.Total } %}
{% endblock %}
