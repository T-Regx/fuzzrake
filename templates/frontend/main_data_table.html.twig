<div class="alert alert-warning alert-dismissible fade show" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>

    <p>
        <strong>WARNING!</strong> Commissions status information is a prototype feature and should not be 100% relied on.
    </p>
</div>

<table id="artisans" class="table table-striped table-sm table-hover text-center">
    <thead class="thead-dark">
    <tr>
        <th class="text-left">Fursuit maker /&nbsp;studio name</th>
        <th class="hidden-data">Country</th>
        <th class="toggleable no-sorting">Styles</th>
        <th class="toggleable no-sorting default-hidden">Types</th>
        <th class="toggleable no-sorting default-hidden">Features</th>
        <th class="toggleable">Commissions</th>
        <th class="no-sorting">Links</th>
    </tr>
    </thead>
    <tbody>
    {% for artisan in artisans %}
        <tr class="fursuit-maker"
            data-name="{{ artisan.name }}"
            data-formerly="{{ artisan.formerly }}"
            data-since="{{ artisan.since|since }}"
            data-country="{{ artisan.country }}"
            data-state="{{ artisan.state }}"
            data-city="{{ artisan.city }}"
            data-intro="{{ artisan.intro }}"
            data-types="{{ artisan.types }}"
            data-other-types="{{ artisan.otherTypes }}"
            data-features="{{ artisan.features }}"
            data-other-features="{{ artisan.otherFeatures }}"
            data-styles="{{ artisan.styles }}"
            data-other-styles="{{ artisan.otherStyles }}"
            data-commissions-status="{{ artisan.areCommissionsOpen is null ? '' : artisan.areCommissionsOpen|number_format }}"
            data-cst-url="{{ artisan.commisionsQuotesCheckUrl }}"
            data-cst-last-check="{{ artisan.commissionsQuotesLastCheck|date('Y-m-d H:i') }}">
            {%- spaceless %}
                <td class="text-left align-middle" data-toggle="modal" data-target="#artisanDetailsModal">
                    {{- artisan.name -}}
                    {%- if artisan.country -%}
                        {{ '&nbsp;' }}<span class="flag-icon flag-icon-{{ artisan.country|lower }}"></span>
                    {%- endif -%}
                </td>
                <td class="hidden-data">
                    {%- if artisan.country -%}
                        {{ artisan.country|lower }}
                    {%- endif -%}
                </td>
                <td class="text-left small align-middle" data-toggle="modal" data-target="#artisanDetailsModal">
                    {{- artisan.styles|other(artisan.otherStyles) -}}
                </td>
                <td class="text-left small align-middle" data-toggle="modal" data-target="#artisanDetailsModal">
                    {{- artisan.types|other(artisan.otherTypes) -}}
                </td>
                <td class="text-left small align-middle" data-toggle="modal" data-target="#artisanDetailsModal">
                    {{- artisan.features|other(artisan.otherFeatures) -}}
                </td>
                <td class="align-middle" data-toggle="modal" data-target="#artisanDetailsModal">
                    {%- if artisan.areCommissionsOpen is null -%}
                    {%- elseif artisan.areCommissionsOpen == true -%}
                        <i class="fas fa-check-circle"></i> Open
                    {%- else -%}
                        <i class="fas fa-times-circle"></i> Closed
                    {%- endif -%}
                </td>
                <td class="text-right align-middle">
                    <div class="btn-group artisan-links" role="group" aria-label="Dropdown with links to websites">
                        {%- if artisan.fursuitReviewUrl -%}
                            <a class="btn btn-secondary" href="{{ artisan.fursuitReviewUrl }}"><i class="fas fa-balance-scale"></i></a>
                        {%- endif -%}
                        {%- if artisan.websiteUrl -%}
                            <a class="btn btn-secondary" href="{{ artisan.websiteUrl }}"><i class="fas fa-link"></i></a>
                        {%- endif -%}
                        {% set btnGroupDropLinksId = 'btnGroupDropLinks' ~ loop.index0 %}
                        <div class="btn-group" role="group">
                            <button id="{{ btnGroupDropLinksId }}" type="button" class="btn btn-secondary dropdown-toggle"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-boundary="viewport" data-flip="false">
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="{{ btnGroupDropLinksId }}">
                                {%- if artisan.fursuitReviewUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.fursuitReviewUrl }}"><i class="fas fa-balance-scale"></i> FursuitReview</a>
                                {%- endif -%}
                                {%- if artisan.websiteUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.websiteUrl }}"><i class="fas fa-link"></i> Official website</a>
                                {%- endif -%}
                                {%- if artisan.furAffinityUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.furAffinityUrl }}"><img src="FurAffinity.svg" alt=""/> FurAffinity</a>
                                {%- endif -%}
                                {%- if artisan.deviantArtUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.deviantArtUrl }}"><i class="fab fa-deviantart"></i> DeviantArt</a>
                                {%- endif -%}
                                {%- if artisan.twitterUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.twitterUrl }}"><i class="fab fa-twitter"></i> Twitter</a>
                                {%- endif -%}
                                {%- if artisan.facebookUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.facebookUrl }}"><i class="fab fa-facebook"></i> Facebook</a>
                                {%- endif -%}
                                {%- if artisan.tumblrUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.tumblrUrl }}"><i class="fab fa-tumblr"></i> Tumblr</a>
                                {%- endif -%}
                                {%- if artisan.instagramUrl -%}
                                    <a class="dropdown-item" href="{{ artisan.instagramUrl }}"><i class="fab fa-instagram"></i> Instagram</a>
                                {%- endif -%}
                                <a class="dropdown-item request-update" href="https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Fgetfursu.it%2F&ref_src=twsrc%5Etfw&screen_name=Veelkoov&text=Fursuit%20maker%20update%20request%3A%20{{ artisan.name|url_encode }}%20(please%20describe%20details)&tw_p=tweetbutton">
                                    <i class="fas fa-exclamation-triangle"></i> Request update
                                </a>
                            </div>
                        </div>
                    </div>
                </td>
            {% endspaceless -%}
        </tr>
    {% endfor %}
    </tbody>
</table>
